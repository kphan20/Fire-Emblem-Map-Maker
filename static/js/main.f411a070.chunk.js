(this.webpackJsonpmap_maker=this.webpackJsonpmap_maker||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Sacae1.0b274fdb.png"},29:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),c=n(8),a=n.n(c),i=(n(19),n(3)),s=(n(20),n(4)),l=n(1),u=16,d=512,f=function(e){return Object(l.jsx)("div",{className:"cell",style:e})},b=function(e){return e%32*u*2},j=function(e){return 2*(496-Math.floor(e/32)*u)},h=Object(s.b)({name:"hotbar",initialState:{items:[]},reducers:{add:function(e,t){t.payload<0||(e.items.length<8&&!e.items.includes(t.payload)?e.items.push(t.payload):console.error("Hotbar size exceeded"))},deleteItem:function(e,t){e.items.splice(t.payload,1)},clear:function(e){e.items=[]}}}),m=h.actions,p=m.add,v=(m.deleteItem,m.clear),g=function(e){return e.hotbar.items},O=h.reducer,x=n(7),w=function(){return Object(x.b)()},y=x.c,C=Object(s.b)({name:"tileset",initialState:{selectedTile:-1,selectedX:"",selectedY:""},reducers:{select:function(e,t){e.selectedTile=t.payload}}}),k=C.actions.select,E=function(e){return e.tileset.selectedTile},M=C.reducer;function N(){for(var e=y(g),t=w(),n=e.map((function(e){var n={backgroundPositionX:"-".concat(b(e),"px"),backgroundPositionY:"-".concat(j(e),"px")};return Object(l.jsx)("div",{className:"hotbarCell",onClick:function(){t(k(e))},style:n})}));n.length<8;)n.push(Object(l.jsx)("div",{className:"hotbarEmpty"}));return Object(l.jsx)("div",{id:"hotbar",className:"absolute",children:n})}n(26);function L(){var e=[],t=w();return function(){for(var n=function(n){for(var r=function(r){var o={top:"".concat((d-n-u)/d*100,"%"),right:"".concat((d-r-u)/d*100,"%"),width:"".concat(u,"px"),height:"".concat(u,"px"),margin:"none"};e.push(Object(l.jsx)("div",{className:"tilesetSelection",style:o,onClick:function(){t(k(r/u+n/u*d/u))}}))},o=0;o<d;o+=u)r(o)},r=0;r<d;r+=u)n(r)}(),Object(l.jsxs)("div",{id:"tilesetContainer",children:[e,Object(l.jsx)("img",{src:n(27).default,alt:"tilesetImage"})]})}var R=n(2),T=n(5),P={grid:function(e,t){for(var n=[],r=0;r<e*t;r++)n.push(f());return n}(3,3),rows:3,cols:3,dragFill:!1},S=Object(s.b)({name:"mapCanvas",initialState:P,reducers:{changeGridTile:function(e,t){var n=Object(T.a)(e.grid);return n[t.payload.id]=f(t.payload.style),Object(R.a)(Object(R.a)({},e),{},{grid:n})},addBottomRow:function(e){for(var t=Object(T.a)(e.grid),n=0;n<e.cols;n++)t.push(f());return Object(R.a)(Object(R.a)({},e),{},{grid:t,rows:e.rows+1})},addTopRow:function(e){var t=Array(e.cols).fill(f());return Object(R.a)(Object(R.a)({},e),{},{grid:t.concat(e.grid),rows:e.rows+1})},addRightCol:function(e){for(var t=Object(T.a)(e.grid),n=1;n<e.rows;n++)t.splice(n*(e.cols+1)-1,0,f());return t.push(f()),Object(R.a)(Object(R.a)({},e),{},{grid:t,cols:e.cols+1})},addLeftCol:function(e){for(var t=Object(T.a)(e.grid),n=0;n<e.rows;n++)t.splice(n*(e.cols+1),0,f());return Object(R.a)(Object(R.a)({},e),{},{grid:t,cols:e.cols+1})},deleteRow:function(e){var t=e.grid.slice(0,e.grid.length-e.cols);return Object(R.a)(Object(R.a)({},e),{},{grid:t,rows:e.rows-1})},deleteCol:function(e){for(var t=Object(T.a)(e.grid),n=t.length-1;n>=0;n-=e.cols)t.splice(n,1);return Object(R.a)(Object(R.a)({},e),{},{grid:t,cols:e.cols-1})},toggleDragFill:function(e){return Object(R.a)(Object(R.a)({},e),{},{dragFill:!e.dragFill})}}}),I=S.actions,Y=I.changeGridTile,F=I.addBottomRow,X=I.addTopRow,B=I.addLeftCol,A=I.addRightCol,D=I.deleteRow,V=I.deleteCol,z=I.toggleDragFill,J=function(e){return e.mapCanvas.grid},W=function(e){return e.mapCanvas.rows},G=function(e){return e.mapCanvas.cols},H=function(e){return e.mapCanvas.dragFill},_=S.reducer;function $(){var e=Object(r.useRef)(null),t=w(),n=y(W),o=y(G),c=y(J),a=y(H),s=y(E),d=Object(r.useState)(),f=Object(i.a)(d,2),h=f[0],m=f[1],p=Object(r.useState)(),v=Object(i.a)(p,2),g=v[0],O=v[1];Object(r.useEffect)((function(){m("-".concat(b(s),"px")),O("-".concat(j(s),"px"))}),[s]);var x=Object(r.useState)(1),C=Object(i.a)(x,2),k=C[0],M=C[1];Object(r.useEffect)((function(){var r=e.current;r.style.setProperty("--rows","".concat(n)),r.style.setProperty("--columns","".concat(o)),r.style.setProperty("--tilesize","".concat(32,"px"));var c=[0,0],i=[0,0],l=[0,0],d=!1,f=!1,b=0,j=0,m=0,p=0,v=r.getBoundingClientRect(),O=function(e,t,n){return n<e?e:n>t?t:n},x=function(e){c=l=[e.clientX-r.offsetLeft,e.clientY-r.offsetTop],i=[e.clientX-v.x,e.clientY-v.y],d=!0;var t=parseInt(r.style.getPropertyValue("--columns")),n=parseInt(r.style.getPropertyValue("--rows")),o=window.visualViewport.width-2*t*u,a=window.visualViewport.height-2*n*u,s=u*(k-1),f=t*s,h=n*s,g=o>=0?1:-1,O=o-g*f;m=Math.min(g*f,O),p=Math.max(g*f,O),O=a-(g=a>=0?1:-1)*h,b=Math.min(g*h,O),j=Math.max(g*h,O)},w=function(e){if(d){c=[e.clientX-r.offsetLeft,e.clientY-r.offsetTop];var t=r.offsetLeft,n=r.offsetTop,o=c[0]-l[0],i=c[1]-l[1];t+=o,n+=i,function(e,t){return Math.pow(e,2)+Math.pow(t,2)>.01}(o,i)&&(f=!0),a||(t=O(m,p,t),n=O(b,j,n),r.style.left="".concat(t,"px"),r.style.top="".concat(n,"px"))}},y=function(e){if(d){if(d=!1,f){if(a)for(var c=Math.floor(i[0]/(32*k)),l=Math.floor(i[1]/(32*k)),u=Math.floor((e.clientX-v.x)/(32*k)),b=Math.floor((e.clientY-v.y)/(32*k)),j={backgroundPositionX:h,backgroundPositionY:g},m=Math.min(c,u);m<=Math.max(c,u);m++)for(var p=Math.min(l,b);p<=Math.max(l,b)&&!(p>n-1||m>o-1);p++)t(Y({id:p*o+m,style:j}))}else if(s>-1){var O=r.getBoundingClientRect(),x=e.clientX-O.x,w=e.clientY-O.y;x=Math.floor(x/(32*k)),w=Math.floor(w/(32*k)),t(Y({id:w*o+x,style:{backgroundPositionX:h,backgroundPositionY:g}}))}f=!1}},C=function(e){e.preventDefault();var t=k;t+=-.01*e.deltaY,t=Math.min(Math.max(1,t),4),r.style.transform="scale(".concat(t,")"),M(t)};return r.addEventListener("mousedown",x),r.addEventListener("mousemove",w),document.addEventListener("mousemove",w),r.addEventListener("mouseup",y),r.addEventListener("wheel",C),window.addEventListener("mouseup",y),function(){r.removeEventListener("mousedown",x),r.removeEventListener("mousemove",w),document.removeEventListener("mousemove",w),r.removeEventListener("mouseup",y),r.removeEventListener("wheel",C),window.removeEventListener("mouseup",y)}}),[h,g,n,o,k,a]);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{id:"container",className:"absolute",ref:e,children:c}),Object(l.jsx)("button",{id:"recenter",className:"absolute",onClick:function(){var t=e.current,n=t.offsetWidth,r=n<window.visualViewport.width?"calc(50vw - ".concat(n/2,"px)"):"0px";t.style.left=r;var o=t.offsetHeight,c=o<window.visualViewport.height?"calc(50vh - ".concat(o/2,"px)"):"0px";t.style.top=c},children:"Recenter Map"})]})}var q=n(13),K=n.n(q),Q=n(14);function U(){var e=w(),t=y(J),n=y(W),o=y(G),c=function(e){for(var t=[],r=[],c=0;c<n;c++){for(var a=0;a<o;a++)r.push(e[c*o+a]);t.push(r),r=[]}t.reverse();var i=[];return t.forEach((function(e){e.forEach((function(e){i.push(e)}))})),i},a=function(e){return parseInt(e.substring(0,e.length-2))},s=function(){var e=Object(Q.a)(K.a.mark((function e(){var r,i,s,l,f,b;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c(t),i=[],s=0;case 3:if(!(s<r.length)){e.next=15;break}l=r[s].props.style,e.prev=5,i.push((j=a(l.backgroundPositionX),h=a(l.backgroundPositionY),-j/32+(h/2+d-u)/u*32)),e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(5),e.abrupt("return");case 12:s++,e.next=3;break;case 15:return f={rows:n,cols:o,mapData:i},e.next=18,fetch("http://127.0.0.1:3000",{mode:"cors",method:"POST",body:JSON.stringify(f)});case 18:return b=e.sent,console.log(b),e.abrupt("return",b);case 21:case"end":return e.stop()}var j,h}),e,null,[[5,9]])})));return function(){return e.apply(this,arguments)}}(),f=Object(r.useState)(n),b=Object(i.a)(f,2),j=b[0],h=b[1],m=Object(r.useState)(o),p=Object(i.a)(m,2),v=p[0],g=p[1];Object(r.useEffect)((function(){h(n),g(o)}),[n,o]);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{id:"gridEditors",className:"absolute",children:[Object(l.jsx)("button",{id:"addBottomRow",className:"gridEditor",onClick:function(){return e(F())},children:"Add Bottom Row"}),Object(l.jsx)("button",{id:"addTopRow",className:"gridEditor",onClick:function(){return e(X())},children:"Add Top Row"}),Object(l.jsx)("button",{id:"addRightCol",className:"gridEditor",onClick:function(){return e(A())},children:"Add Right Col"}),Object(l.jsx)("button",{id:"addLeftCol",className:"gridEditor",onClick:function(){return e(B())},children:"Add Left Col"}),Object(l.jsx)("button",{id:"submit",className:"gridEditor",onClick:s,children:"Submit"}),Object(l.jsx)("button",{id:"toggleDragFill",className:"gridEditor",onClick:function(){return e(z())},children:"Drag Fill"})]}),Object(l.jsxs)("div",{id:"sizeInput",className:"absolute",children:[Object(l.jsx)("span",{children:"Rows:"}),Object(l.jsx)("input",{id:"rowChange",className:"gridEditor",type:"number",min:"0",max:"50",value:j,onChange:function(e){return h(parseInt(e.currentTarget.value))},onBlur:function(t){return function(t){if(t)if(n<t)for(var r=0;r<t-n;r++)e(F());else if(n>t)for(var o=n;o>t;o--)e(D())}(parseInt(t.currentTarget.value))}}),Object(l.jsx)("br",{}),Object(l.jsx)("span",{children:"Columns:"}),Object(l.jsx)("input",{id:"colsChange",className:"gridEditor",type:"number",min:"0",max:"50",value:v,onChange:function(e){return g(parseInt(e.currentTarget.value))},onBlur:function(t){return function(t){if(t)if(o<t)for(var n=0;n<t-o;n++)e(A());else if(o>t)for(var r=o;r>t;r--)e(V())}(parseInt(t.currentTarget.value))}})]})]})}function Z(){var e=Object(r.useState)(!0),t=Object(i.a)(e,2),n=t[0],o=t[1],c=w(),a=y(E),s={height:"".concat(32),width:"".concat(32),backgroundPositionX:"-".concat(b(a),"px"),backgroundPositionY:"-".concat(j(a),"px")};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{id:"tileset",className:"absolute",children:[Object(l.jsx)("button",{id:"toggleTileset",onClick:function(){return o(!n)},children:n?">":"<"}),n&&Object(l.jsx)(L,{})]}),Object(l.jsx)(U,{}),Object(l.jsx)($,{}),Object(l.jsxs)("div",{id:"hotbarOptions",className:"absolute",children:[Object(l.jsx)("button",{id:"hotbarAdd",onClick:function(){return c(p(a))},children:"Add selected to hotbar"}),Object(l.jsx)("button",{id:"hotbarClear",onClick:function(){return c(v())},children:"Clear"})]}),Object(l.jsx)("div",{id:"selectedTile",className:"absolute",style:s}),Object(l.jsx)(N,{})]})}var ee=Object(s.a)({reducer:{hotbar:O,tileset:M,mapCanvas:_}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(Object(l.jsx)(o.a.StrictMode,{children:Object(l.jsx)(x.a,{store:ee,children:Object(l.jsx)(Z,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.f411a070.chunk.js.map